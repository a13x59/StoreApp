@model IEnumerable<StoreApp.Models.StatisticsViewModel>
@{
    ViewBag.Title = "Статистика";
}

@section styles{
    @Styles.Render("~/statistics/css")
}

<h2>Статистика</h2>

<div ng-app="productsApp" ng-controller="ProductsCtrl">
    <button class="btn btn-default" ng-click="updateProductsList()">
        <span class="glyphicon glyphicon-refresh"></span> &nbsp;Обновить
    </button>

    <button class="btn btn-default" ng-click="makeProduct()" ng-disabled="model.selectedProduct == null">
        <span class="glyphicon glyphicon-new-window"></span> &nbsp;Изготовить деталь
    </button>

    <table id="productsList" class="table table-striped">
        <thead>
            <tr>
                <th>Наименование продукта</th>
                <th>Доступное количество</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="product in model.products" ng-click='selectProduct(product)' ng-class="{'selected': product.productId === model.selectedProduct.productId}" )>
                <td ng-bind="product.productName"></td>
                <td ng-bind="product.count"></td>
            </tr>
        </tbody>
    </table>
    <div ng-show="model.isLoading"><p>Загрузка...</p></div>
</div>



@section scripts{
    @Scripts.Render("~/bundles/angularjs")
    @Scripts.Render("~/bundles/statistics")
}